<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Etherscan Token Holders</title>
</head>
<body>
    <h1>Etherscan Token Holders</h1>
    <p>Enter the Ethereum contract address:</p>
    <input type="text" id="contractAddress" placeholder="0x...">
    <button onclick="fetchTokenHolders()">Fetch Token Holders</button>
    <h2>Token Holders:</h2>
    <table id="tokenHoldersTable">
        <thead>
            <tr>
                <th>Rank</th>
                <th>Address</th>
                <th>Quantity</th>
                <th>Percentage</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <script>
        function fetchTokenHolders() {
            const contractAddress = document.getElementById("contractAddress").value;
            const tableBody = document.querySelector("#tokenHoldersTable tbody");
            let page = 1;

            function fetchData() {
                const url = `https://etherscan.io/token/generic-tokenholders2?a=${contractAddress}&s=0&p=${page}`;

                fetch(url)
                    .then(response => response.text())
                    .then(data => {
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(data, "text/html");
                        const tableRows = doc.querySelectorAll("table.table tbody tr");

                        if (tableRows.length > 0) {
                            tableRows.forEach(row => {
                                const cells = row.querySelectorAll("td");
                                if (cells.length >= 4) {
                                    const rank = cells[0].textContent.trim();
                                    const address = cells[1].textContent.trim();
                                    const quantity = cells[2].textContent.trim();
                                    const percentage = cells[3].textContent.trim();

                                    const newRow = document.createElement("tr");
                                    newRow.innerHTML = `<td>${rank}</td><td>${address}</td><td>${quantity}</td><td>${percentage}</td>`;
                                    tableBody.appendChild(newRow);
                                }
                            });

                            page++;
                            fetchData(); // Fetch the next page
                        }
                    })
                    .catch(error => {
                        console.error("Error fetching data:", error);
                    });
            }

            // Clear existing table rows if any
            tableBody.innerHTML = "";

            // Start fetching data
            fetchData();
        }
    </script>
</body>
</html>
